<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>3D Minimap</title>


  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <!--  <link rel="stylesheet" href="../node_modules/leaflet/dist/leaflet.css" />-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.css"
        integrity="sha512-mD70nAW2ThLsWH0zif8JPbfraZ8hbCtjQ+5RU1m4+ztZq6/MymyZeB55pWsi4YAX+73yvcaJyk61mzfYMvtm9w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <style>
    #map, body, html {
      height: 100%;
      width: 100%;
      margin: 0;
    }

  </style>
</head>

<body>
<div id="map"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.js"
        integrity="sha512-Dqm3h1Y4qiHUjbhxTuBGQsza0Tfppn53SHlu/uj1f+RT+xfShfe7r6czRf5r2NmllO2aKx+tYJgoxboOkn1Scg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!--  <script src="../node_modules/d3/d3.min.js"></script>-->
<!--  <script src="../node_modules/topojson-client/dist/topojson-client.min.js"></script>-->
<!--  <script src="../node_modules/leaflet/dist/leaflet.js"></script>-->
<script src="../dist/Control.GlobeMiniMap.min.js"></script>
<script>
  var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
  });

  var map = L.map('map', {
    scrollWheelZoom: false,
    center: [0, 0],
    zoom: 2
  });
  map.setView({lat: 27.642173315458816, lng: -114.43359375000001})

  map.addLayer(layer);
  // let d = 42;
  // let width = 10;
  // let r = (d+width)/2
  //
  // let gradient = CanvasGradient.createRadialGradient(r, r, r-width,r, r, r )
  // gradient.addColorStop(0, 'red');
  // gradient.addColorStop(.5, 'blue');
  // gradient.addColorStop(1, 'green');

 /* let g = [
    [0, 'red'],
    [0.5, 'blue'],
    [1, 'green']
  ]*/
  let g = [
    [0, '#00000000'],
    [0.4, 'rgba(238,0,255,0.27)'],
    [0.49, 'rgba(121,6,129,0.59)'],
    [0.5, 'rgba(0,0,0,0.48)'],
    [0.55, 'rgba(0,0,0,0.51)'],
    [0.56, 'rgba(75,234,229,0.56)'],
    [0.8, 'rgba(98,248,220,0.34)'],
    [0.95, 'rgba(98,248,220,0.12)'],
    [1, '#00000000'],
  ]

  let toonOptions = {
    height: 242,
    width: 242,
    // topojsonSrc: "../src/world.json",

    // globeBlur: true,
    water: "rgba(0,150,231,0.34)",
    globeStroke: g,
    // drawGlobeGradient: true,
    globeStrokeWidth: 25,

    land: "rgba(62,255,8,0.61)",
    landStroke: "#031703",
    // shadow: "rgba(129,35,129,0.63)",
    landStrokeWidth: 1,
  }
  var miniMap;

  function makeMiniMap(theme) {

    let o = Object.assign({
      height: 40,
      width: 40,
      topojsonSrc: "../src/world.json",
      onAdd: (map, mm) => {
        mm._container.addEventListener("click", e => {
          console.log("World CLicked");
          meSize += 5; // just a demo of detecting click .
          miniMap.hackMation(30, meSize)
        })
      }
    }, theme)

    miniMap = new L.Control.GlobeMiniMap(o).addTo(map);


  }
  let meSize = 40
  makeMiniMap(toonOptions);


  // var miniMap = new L.Control.GlobeMiniMap({
  //   //uncomment to assign colors
  //   land: 'rgba(15,30,1,0.89)',
  //   water: 'rgba(11,87,64,0.63)',
  //   width: 42,
  //   height: 42,
  //   globeBlur: true,
  //   globeStrokeWidth: true,
  //   globeStroke: "rgba(0,34,252,0.38)",
  //   landStroke: "#00ff00",
  //   landShadow: "#FAE",
  //   // marker:'#000000'
  //   topojsonSrc: '../src/world.json',
  //   onAdd: (map, mm) => {
  //     mm._container.addEventListener("click", e => {
  //       console.log("World CLicked");
  //       meSize += 5; // just a demo of detecting click .
  //       miniMap.hackMation(30, meSize)
  //     })
  //   }
  // }).addTo(map);


</script>
</body>
</html>
