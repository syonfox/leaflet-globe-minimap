!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("leaflet"),require("topojson-client"));else if("function"==typeof define&&define.amd)define(["d3","leaflet","topojson-client"],e);else{var n="object"==typeof exports?e(require("d3"),require("leaflet"),require("topojson-client")):e(t.d3,t.L,t.topojson);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(t,e,n){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,n){"use strict";function o(t){var e,n,o,i;for(n=1,o=arguments.length;n<o;n++){i=arguments[n];for(e in i)t[e]=i[e]}return t}function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}}function r(t){return"_leaflet_id"in t||(t._leaflet_id=e.lastId=_+=1),t._leaflet_id}function a(t,e,n){var o,i,r,a;return a=function(){o=!1,i&&(r.apply(n,i),i=!1)},r=function(){o?i=arguments:(t.apply(n,arguments),setTimeout(a,e),o=!0)}}function s(t,e,n){var o=e[1],i=e[0],r=o-i;return t===o&&n?t:((t-i)%r+r)%r+i}function u(){return!1}function l(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return c(t).split(/\s+/)}function f(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?g(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function p(t,e,n){var o=[];for(var i in t)o.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")}function h(t,e){return t.replace(M,function(t,n){var o=e[n];if(void 0===o)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})}function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function m(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function y(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}function w(t,e,n){if(!n||P!==y)return P.call(window,i(t,e));t.call(e)}function b(t){t&&S.call(window,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.extend=o,e.bind=i,e.stamp=r,e.throttle=a,e.wrapNum=s,e.falseFn=u,e.formatNum=l,e.trim=c,e.splitWords=d,e.setOptions=f,e.getParamString=p,e.template=h,e.indexOf=v,e.requestAnimFrame=w,e.cancelAnimFrame=b;var g=e.create=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),_=e.lastId=0,M=/\{ *([\w_ -]+) *\}/g,x=(e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",0),P=e.requestFn=window.requestAnimationFrame||m("RequestAnimationFrame")||y,S=e.cancelFn=window.cancelAnimationFrame||m("CancelAnimationFrame")||m("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}},function(t,e,n){"use strict";function o(t,e,n,o){if(e&&"object"===(void 0===e?"undefined":y(e)))for(var i in e)a(t,i,e[i],n);else{e=g.splitWords(e);for(var r=0,s=e.length;r<s;r++)a(t,e[r],n,o)}return this}function i(t,e,n,o){if(1===arguments.length)r(t),delete t[O];else if(e&&"object"===(void 0===e?"undefined":y(e)))for(var i in e)s(t,i,e[i],n);else if(e=g.splitWords(e),2===arguments.length)r(t,function(t){return-1!==g.indexOf(e,t)});else for(var a=0,u=e.length;a<u;a++)s(t,e[a],n,o);return this}function r(t,e){for(var n in t[O]){var o=n.split(/\d/)[0];e&&!e(o)||s(t,o,null,null,n)}}function a(t,e,n,o){var i=e+g.stamp(n)+(o?"_"+g.stamp(o):"");if(t[O]&&t[O][i])return this;var r=function(e){return n.call(o||t,e||window.event)},a=r;!M.default.touchNative&&M.default.pointer&&0===e.indexOf("touch")?r=(0,x.addPointerListener)(t,e,r):M.default.touch&&"dblclick"===e?r=(0,P.addDoubleTapListener)(t,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(T[e]||e,r,!!M.default.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,m(t,e)&&a(e)},t.addEventListener(T[e],r,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,r),t[O]=t[O]||{},t[O][i]=r}function s(t,e,n,o,i){i=i||e+g.stamp(n)+(o?"_"+g.stamp(o):"");var r=t[O]&&t[O][i];if(!r)return this;!M.default.touchNative&&M.default.pointer&&0===e.indexOf("touch")?(0,x.removePointerListener)(t,e,r):M.default.touch&&"dblclick"===e?(0,P.removeDoubleTapListener)(t,r):"removeEventListener"in t?t.removeEventListener(T[e]||e,r,!1):t.detachEvent("on"+e,r),t[O][i]=null}function u(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function l(t){return a(t,"wheel",u),this}function c(t){return o(t,"mousedown touchstart dblclick contextmenu",u),t._leaflet_disable_click=!0,this}function d(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function f(t){return d(t),u(t),this}function p(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function h(t,e){if(!e)return new w.Point(t.clientX,t.clientY);var n=(0,S.getScale)(e),o=n.boundingClientRect;return new w.Point((t.clientX-o.left)/n.x-e.clientLeft,(t.clientY-o.top)/n.y-e.clientTop)}function v(t){return M.default.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/E:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function m(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}Object.defineProperty(e,"__esModule",{value:!0}),e.removeListener=e.addListener=void 0;var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.on=o,e.off=i,e.stopPropagation=u,e.disableScrollPropagation=l,e.disableClickPropagation=c,e.preventDefault=d,e.stop=f,e.getPropagationPath=p,e.getMousePosition=h,e.getWheelDelta=v,e.isExternalTarget=m;var w=n(3),b=n(0),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(b),_=n(2),M=function(t){return t&&t.__esModule?t:{default:t}}(_),x=n(8),P=n(7),S=n(9),O="_leaflet_events",T={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"},E=M.default.linux&&M.default.chrome?window.devicePixelRatio:M.default.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;e.addListener=o,e.removeListener=i},function(t,e,n){"use strict";function o(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(0),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),s=n(10),u=document.documentElement.style,l="ActiveXObject"in window,c=l&&!document.addEventListener,d="msLaunchUri"in navigator&&!("documentMode"in document),f=o("webkit"),p=o("android"),h=o("android 2")||o("android 3"),v=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),m=p&&o("Google")&&v<537&&!("AudioNode"in window),y=!!window.opera,w=!d&&o("chrome"),b=o("gecko")&&!f&&!y&&!l,g=!w&&o("safari"),_=o("phantom"),M="OTransition"in u,x=0===navigator.platform.indexOf("Win"),P=l&&"transition"in u,S="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!h,O="MozPerspective"in u,T=!window.L_DISABLE_3D&&(P||S||O)&&!M&&!_,E="undefined"!=typeof orientation||o("mobile"),C=E&&f,L=E&&S,j=!window.PointerEvent&&window.MSPointerEvent,k=!(!window.PointerEvent&&!j),A="ontouchstart"in window||!!window.TouchEvent,N=!window.L_NO_TOUCH&&(A||k),D=E&&y,R=E&&b,I=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,q=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",a.falseFn,e),window.removeEventListener("testPassiveEventSupport",a.falseFn,e)}catch(t){}return t}(),U=function(){return!!document.createElement("canvas").getContext}(),B=!(!document.createElementNS||!(0,s.svgCreate)("svg").createSVGRect),F=!!B&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),W=!B&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===i(e.adj)}catch(t){return!1}}(),z=0===navigator.platform.indexOf("Mac"),Y=0===navigator.platform.indexOf("Linux");e.default={ie:l,ielt9:c,edge:d,webkit:f,android:p,android23:h,androidStock:m,opera:y,chrome:w,gecko:b,safari:g,phantom:_,opera12:M,win:x,ie3d:P,webkit3d:S,gecko3d:O,any3d:T,mobile:E,mobileWebkit:C,mobileWebkit3d:L,msPointer:j,pointer:k,touch:N,touchNative:A,mobileOpera:D,mobileGecko:R,retina:I,passiveEvents:q,canvas:U,svg:B,vml:W,inlineSvg:F,mac:z,linux:Y}},function(t,e,n){"use strict";function o(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function i(t,e,n){return t instanceof o?t:(0,a.isArray)(t)?new o(t[0],t[1]):void 0===t||null===t?t:"object"===(void 0===t?"undefined":r(t))&&"x"in t&&"y"in t?new o(t.x,t.y):new o(t,e,n)}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.Point=o,e.toPoint=i;var a=n(0),s=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(i(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(i(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new o(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new o(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=s(this.x),this.y=s(this.y),this},distanceTo:function(t){t=i(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=i(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=i(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+(0,a.formatNum)(this.x)+", "+(0,a.formatNum)(this.y)+")"}}},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){"use strict";function o(t){var e,n,o={};for(n in t)e=t[n],o[n]=e&&e.bind?e.bind(t):e;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}function i(t,e){function n(t){if(1!==t.detail)return void(i=t.detail);if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var n=s.getPropagationPath(t);if(!n.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||n.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var a=Date.now();a-r<=u?2===++i&&e(o(t)):i=1,r=a}}}t.addEventListener("dblclick",e);var i,r=0;return t.addEventListener("click",n),{dblclick:e,simDblclick:n}}function r(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}Object.defineProperty(e,"__esModule",{value:!0}),e.addDoubleTapListener=i,e.removeDoubleTapListener=r;var a=n(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),u=200},function(t,e,n){"use strict";function o(t,e,n){return"touchstart"===e&&u(),_[e]?(n=_[e].bind(this,n),t.addEventListener(g[e],n,!1),n):(console.warn("wrong event specified:",e),v.falseFn)}function i(t,e,n){if(!g[e])return void console.warn("wrong event specified:",e);t.removeEventListener(g[e],n,!1)}function r(t){M[t.pointerId]=t}function a(t){M[t.pointerId]&&(M[t.pointerId]=t)}function s(t){delete M[t.pointerId]}function u(){x||(document.addEventListener(m,r,!0),document.addEventListener(y,a,!0),document.addEventListener(w,s,!0),document.addEventListener(b,s,!0),x=!0)}function l(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in M)e.touches.push(M[n]);e.changedTouches=[e],t(e)}}function c(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&f.preventDefault(e),l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.addPointerListener=o,e.removePointerListener=i;var d=n(1),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),p=n(2),h=function(t){return t&&t.__esModule?t:{default:t}}(p),v=n(0),m=h.default.msPointer?"MSPointerDown":"pointerdown",y=h.default.msPointer?"MSPointerMove":"pointermove",w=h.default.msPointer?"MSPointerUp":"pointerup",b=h.default.msPointer?"MSPointerCancel":"pointercancel",g={touchstart:m,touchmove:y,touchend:w,touchcancel:b},_={touchstart:c,touchmove:l,touchend:l,touchcancel:l},M={},x=!1},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return"string"==typeof t?document.getElementById(t):t}function r(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n}function a(t,e,n){var o=document.createElement(t);return o.className=e||"",n&&n.appendChild(o),o}function s(t){var e=t.parentNode;e&&e.removeChild(t)}function u(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function l(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function c(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function d(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=v(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function f(t,e){if(void 0!==t.classList)for(var n=k.splitWords(e),o=0,i=n.length;o<i;o++)t.classList.add(n[o]);else if(!d(t,e)){var r=v(t);h(t,(r?r+" ":"")+e)}}function p(t,e){void 0!==t.classList?t.classList.remove(e):h(t,k.trim((" "+v(t)+" ").replace(" "+e+" "," ")))}function h(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function v(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function m(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&y(t,e)}function y(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function w(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function b(t,e,n){var o=e||new A.Point(0,0);t.style[R]=(D.default.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")}function g(t,e){t._leaflet_pos=e,D.default.any3d?b(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function _(t){return t._leaflet_pos||new A.Point(0,0)}function M(){L.on(window,"dragstart",L.preventDefault)}function x(){L.off(window,"dragstart",L.preventDefault)}function P(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(S(),U=t,B=t.style.outline,t.style.outline="none",L.on(window,"keydown",S))}function S(){U&&(U.style.outline=B,U=void 0,B=void 0,L.off(window,"keydown",S))}function O(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function T(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.enableTextSelection=e.disableTextSelection=e.TRANSITION_END=e.TRANSITION=e.TRANSFORM=void 0,e.get=i,e.getStyle=r,e.create=a,e.remove=s,e.empty=u,e.toFront=l,e.toBack=c,e.hasClass=d,e.addClass=f,e.removeClass=p,e.setClass=h,e.getClass=v,e.setOpacity=m,e.testProp=w,e.setTransform=b,e.setPosition=g,e.getPosition=_,e.disableImageDrag=M,e.enableImageDrag=x,e.preventOutline=P,e.restoreOutline=S,e.getSizedParentNode=O,e.getScale=T;var E,C=n(1),L=o(C),j=n(0),k=o(j),A=n(3),N=n(2),D=function(t){return t&&t.__esModule?t:{default:t}}(N),R=e.TRANSFORM=w(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),I=e.TRANSITION=w(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);e.TRANSITION_END="webkitTransition"===I||"OTransition"===I?I+"End":"transitionend",e.disableTextSelection=void 0,e.enableTextSelection=void 0;if("onselectstart"in document)e.disableTextSelection=function(){L.on(window,"selectstart",L.preventDefault)},e.enableTextSelection=function(){L.off(window,"selectstart",L.preventDefault)};else{var q=w(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.disableTextSelection=function(){if(q){var t=document.documentElement.style;E=t[q],t[q]="none"}},e.enableTextSelection=function(){q&&(document.documentElement.style[q]=E,E=void 0)}}var U,B},function(t,e,n){"use strict";function o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function i(t,e){var n,o,i,r,s,u,l="";for(n=0,i=t.length;n<i;n++){for(s=t[n],o=0,r=s.length;o<r;o++)u=s[o],l+=(o?"L":"M")+u.x+" "+u.y;l+=e?a.default.svg?"z":"x":""}return l||"M0 0"}Object.defineProperty(e,"__esModule",{value:!0}),e.svgCreate=o,e.pointsToPath=i;var r=n(2),a=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(4);var s=n(5),u=function(t){return t&&t.__esModule?t:{default:t}}(s);n(6);var l=(n(1),function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),a(e,[{key:"initialize",value:function(t){u.default.Util.setOptions(this,t)}},{key:"onAdd",value:function(t){return this._mainMap=t,this._container=u.default.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",u.default.DomEvent.disableClickPropagation(this._container),u.default.DomEvent.on(this._container,"mousewheel",u.default.DomEvent.stopPropagation),this._userToggledDisplay=!1,this._minimized=!1,this._mainMap.on("moveend",this._onMainMapMoved,this),this._container}},{key:"addTo",value:function(t){return u.default.Control.prototype.addTo.call(this,t),this.initCanvas(),"function"==typeof this.options.onAdd&&this.options.onAdd(t,this),this}},{key:"initCanvas",value:function(){var t=this.options.width,e=this.options.height,n=.01*t/82,o=.01*e/82,i=.5*t*1/n,r=.5*e*1/o,a="scale("+n+",-"+o+"),translate("+(i-400)+",-"+r+")";console.log("offset: ",a),d3.select(".leaflet-control-minimap").append("svg").attr("width",this.options.width).attr("height",this.options.height).attr("style","position: absolute; left: 0; top: 0;").append("path").attr("d","m 768,896 q 0,106 -75,181 -75,75 -181,75 -106,0 -181,-75 -75,-75 -75,-181 0,-106 75,-181 75,-75 181,-75 106,0 181,75 75,75 75,181 z m 256,0 q 0,-109 -33,-179 L 627,-57 q -16,-33 -47.5,-52 -31.5,-19 -67.5,-19 -36,0 -67.5,19 Q 413,-90 398,-57 L 33,717 Q 0,787 0,896 q 0,212 150,362 150,150 362,150 212,0 362,-150 150,-150 150,-362 z").attr("transform",a).attr("style","fill:"+this.options.marker);var s=(t+e)/4;this.projection=d3.geo.orthographic().scale(s).translate([e/2,t/2]).rotate([0,0]).clipAngle(90);var u=d3.select(".leaflet-control-minimap").append("canvas").attr("width",t).attr("height",e);this.c=u.node().getContext("2d"),this.path=d3.geo.path().projection(this.projection).context(this.c);var l=this;d3.json(this.options.topojsonSrc,function(t){l.globe={type:"Sphere"},l.land=topojson.feature(t,t.objects.land)}),this.transitionMap(this._mainMap.getCenter(),0)}},{key:"hackMation",value:function(t,e,n){n=n||this,t=t||40,e=e||400,t<e&&(t+=3,n.setSize(t),setTimeout(n.hackMation,15,t,e,n))}},{key:"transitionMap",value:function(t,e){e=e||this.options.duration;var n=this,o=n.c,i=n.path;d3.transition().duration(e).each("start",function(){}).tween("rotate",function(){var e=d3.interpolate(n.projection.rotate(),[-t.lng,-t.lat]);return function(t){n.projection.rotate(e(t)),o.clearRect(0,0,n.options.width,n.options.height),o.fillStyle=n.options.water,o.beginPath(),i(n.globe),o.fill(),o.fillStyle=n.options.land,o.beginPath(),i(n.land),o.fill()}})}},{key:"onRemove",value:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),"function"==typeof this.options.onRemove&&this.options.onRemove(t,this)}},{key:"setSize",value:function(t,e){this.options.width=t,this.options.height=e||t,this._map&&this.remove().addTo(this._mainMap)}},{key:"_onMainMapMoved",value:function(t){this._miniMapMoving?this._miniMapMoving=!1:(this._mainMapMoving=!0,this.transitionMap(this._mainMap.getCenter()))}}]),e}(u.default.Control));l.prototype.options={position:"bottomright",width:82,height:82,land:"#bbb",water:"rgba(0, 0, 0, 0.3)",marker:"#CC0000",topojsonSrc:"data/world.json",duration:1250,onAdd:!1,onRemove:!1},u.default.Control.GlobeMiniMap=l,e.default=l,u.default.control.globeminimap=function(t,e){return new u.default.Control.GlobeMiniMap(t,e)},u.default.Map.mergeOptions({miniMapControl:!1}),u.default.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new GlobeMiniMap).addTo(this))})}])});